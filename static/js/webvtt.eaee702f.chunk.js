(this["webpackJsonpsepehr-spa-pwa"]=this["webpackJsonpsepehr-spa-pwa"]||[]).push([[4],{418:function(e,t,n){"use strict";n.r(t);var i=function(e,t){var n=/[\u0020\t\f]/,i=/[^\u0020\t\f]/,a=(e=e,0),s=function(e){t(e,a+1)};function r(t){for(;void 0!=e[a]&&t.test(e[a]);)a++}function o(t){for(var n="";void 0!=e[a]&&t.test(e[a]);)n+=e[a],a++;return n}function l(){var t,n,i,r,l="minutes";if(void 0!=e[a])if(/\d/.test(e[a]))if(((t=o(/\d/)).length>2||parseInt(t,10)>59)&&(l="hours"),":"==e[a])if(a++,2==(n=o(/\d/)).length){if("hours"==l||":"==e[a]){if(":"!=e[a])return void s("No seconds found or minutes is greater than 59.");if(a++,2!=(i=o(/\d/)).length)return void s("Must be exactly two digits.")}else i=n,n=t,t="0";if("."==e[a])if(a++,3==(r=o(/\d/)).length)if(parseInt(n,10)>59)s("You cannot have more than 59 minutes.");else{if(!(parseInt(i,10)>59))return 60*parseInt(t,10)*60+60*parseInt(n,10)+parseInt(i,10)+parseInt(r,10)/1e3;s("You cannot have more than 59 seconds.")}else s("Milliseconds must be given in three digits.");else s('No decimal separator (".") found.')}else s("Must be exactly two digits.");else s("No time unit separator found.");else s("Timestamp must start with a character in the range 0-9.");else s("No timestamp found.")}this.parse=function(t,o){if(r(n),t.startTime=l(),void 0!=t.startTime)if(t.startTime<o&&s("Start timestamp is not greater than or equal to start timestamp of previous cue."),i.test(e[a])&&s("Timestamp not separated from '--\x3e' by whitespace."),r(n),"-"==e[a])if(a++,"-"==e[a])if(a++,">"==e[a]){if(a++,i.test(e[a])&&s("'--\x3e' not separated from timestamp by whitespace."),r(n),t.endTime=l(),void 0!=t.endTime)return t.endTime<=t.startTime&&s("End timestamp is not greater than start timestamp."),i.test(e[a])&&!1,r(n),function(e,t){for(var i=e.split(n),a=[],r=0;r<i.length;r++)if(""!=i[r]){var o=i[r].indexOf(":"),l=i[r].slice(0,o);if(value=i[r].slice(o+1),-1!=a.indexOf(l)&&s("Duplicate setting."),a.push(l),""==value)return void s("No value for setting defined.");if("vertical"==l){if("rl"!=value&&"lr"!=value){s("Writing direction can only be set to 'rl' or 'rl'.");continue}t.direction=value}else if("line"==l){if(!/\d/.test(value)){s("Line position takes a number or percentage.");continue}if(-1!=value.indexOf("-",1)){s("Line position can only have '-' at the start.");continue}if(-1!=value.indexOf("%")&&value.indexOf("%")!=value.length-1){s("Line position can only have '%' at the end.");continue}if("-"==value[0]&&"%"==value[value.length-1]){s("Line position cannot be a negative percentage.");continue}if("%"==value[value.length-1]){if(parseInt(value,10)>100){s("Line position cannot be >100%.");continue}t.snapToLines=!1}t.linePosition=parseInt(value,10)}else if("position"==l){if("%"!=value[value.length-1]){s("Text position must be a percentage.");continue}if(parseInt(value,10)>100){s("Size cannot be >100%.");continue}t.textPosition=parseInt(value,10)}else if("size"==l){if("%"!=value[value.length-1]){s("Size must be a percentage.");continue}if(parseInt(value,10)>100){s("Size cannot be >100%.");continue}t.size=parseInt(value,10)}else if("align"==l){var f=["start","middle","end","left","right"];if(-1==f.indexOf(value)){s("Alignment can only be set to one of "+f.join(", ")+".");continue}t.alignment=value}else s("Invalid setting.")}}(e.substring(a),t),!0}else s("No valid timestamp separator found.");else s("No valid timestamp separator found.");else s("No valid timestamp separator found.")},this.parseTimestamp=function(){var t=l();if(void 0==e[a])return t;s("Timestamp must not have trailing characters.")}},a=function(e,t,n){e=e;var a=0,s=function(e){"metadata"!=n&&t(e,a+1)};function r(){for(var t="data",n="",i="",r=[];void 0!=e[a-1]||0==a;){var o=e[a];if("data"==t)if("&"==o)i=o,t="escape";else if("<"==o&&""==n)t="tag";else{if("<"==o||void 0==o)return["text",n];n+=o}else if("escape"==t)if("&"==o)s("Incorrect escape."),n+=i,i=o;else if(/[abglmnsprt]/.test(o))i+=o;else if(";"==o)"&amp"==i?n+="&":"&lt"==i?n+="<":"&gt"==i?n+=">":"&lrm"==i?n+="\u200e":"&rlm"==i?n+="\u200f":"&nbsp"==i?n+="\xa0":(s("Incorrect escape."),n+=i+";"),t="data";else{if("<"==o||void 0==o)return s("Incorrect escape."),["text",n+=i];s("Incorrect escape."),n+=i+o,t="data"}else if("tag"==t)if("\t"==o||"\n"==o||"\f"==o||" "==o)t="start tag annotation";else if("."==o)t="start tag class";else if("/"==o)t="end tag";else if(/\d/.test(o))n=o,t="timestamp tag";else{if(">"==o||void 0==o)return">"==o&&a++,["start tag","",[],""];n=o,t="start tag"}else if("start tag"==t)if("\t"==o||"\f"==o||" "==o)t="start tag annotation";else if("\n"==o)i=o,t="start tag annotation";else if("."==o)t="start tag class";else{if(">"==o||void 0==o)return">"==o&&a++,["start tag",n,[],""];n+=o}else if("start tag class"==t)if("\t"==o||"\f"==o||" "==o)r.push(i),i="",t="start tag annotation";else if("\n"==o)r.push(i),i=o,t="start tag annotation";else if("."==o)r.push(i),i="";else{if(">"==o||void 0==o)return">"==o&&a++,r.push(i),["start tag",n,r,""];i+=o}else if("start tag annotation"==t){if(">"==o||void 0==o)return">"==o&&a++,["start tag",n,r,i=i.split(/[\u0020\t\f\r\n]+/).filter((function(e){if(e)return!0})).join(" ")];i+=o}else if("end tag"==t){if(">"==o||void 0==o)return">"==o&&a++,["end tag",n];n+=o}else if("timestamp tag"==t){if(">"==o||void 0==o)return">"==o&&a++,["timestamp",n];n+=o}else s("Never happens.");a++}}this.parse=function(t,o){var l={children:[]},f=l,u=[];function d(e){f.children.push({type:"object",name:e[1],classes:e[2],children:[],parent:f}),f=f.children[f.children.length-1]}function p(e){for(var t=f;t;){if(t.name==e)return!0;t=t.parent}}for(;void 0!=e[a];){var c=r();if("text"==c[0])f.children.push({type:"text",value:c[1],parent:f});else if("start tag"==c[0]){"chapters"==n&&s("Start tags not allowed in chapter title text.");var m=c[1];"v"!=m&&"lang"!=m&&""!=c[3]&&s("Only <v> and <lang> can have an annotation."),"c"==m||"i"==m||"b"==m||"u"==m||"ruby"==m||"rt"==m&&"ruby"==f.name?d(c):"v"==m?(p("v")&&s("<v> cannot be nested inside itself."),d(c),f.value=c[3],c[3]||s("<v> requires an annotation.")):"lang"==m?(d(c),f.value=c[3]):s("Incorrect start tag.")}else if("end tag"==c[0])"chapters"==n&&s("End tags not allowed in chapter title text."),c[1]==f.name?f=f.parent:"ruby"==c[1]&&"rt"==f.name?f=f.parent.parent:s("Incorrect end tag.");else if("timestamp"==c[0]){"chapters"==n&&s("Timestamp not allowed in chapter title text.");var v=new i(c[1],s).parseTimestamp();void 0!=v&&((v<=t||v>=o)&&s("Timestamp must be between start timestamp and end timestamp."),u.length>0&&u[u.length-1]>=v&&s("Timestamp must be greater than any previous timestamp."),f.children.push({type:"timestamp",value:v,parent:f}),u.push(v))}}for(;f.parent;)"v"!=f.name&&s("Required end tag missing."),f=f.parent;return l}};t.default=function(){this.parse=function(e,t){var n=Date.now(),s=0,r=e.split(/\r\n|\r|\n/),o=!1,l=[],f=[];function u(e,t){f.push({message:e,line:s+1,col:t})}var d=r[s],p=d.length,c="WEBVTT",m=0,v=c.length;for("\ufeff"===d[0]&&(m=1,v+=1),(p<v||d.indexOf(c)!==0+m||p>v&&" "!==d[v]&&"\t"!==d[v])&&u('No valid signature. (File needs to start with "WEBVTT".)'),s++;""!=r[s]&&void 0!=r[s];){if(u("No blank line after the signature."),-1!=r[s].indexOf("--\x3e")){o=!0;break}s++}for(;void 0!=r[s];){for(var g;!o&&""==r[s];)s++;if(!o&&void 0==r[s])break;g={id:"",startTime:0,endTime:0,pauseOnExit:!1,direction:"horizontal",snapToLines:!0,linePosition:"auto",textPosition:50,size:100,alignment:"middle",text:"",tree:null};var h=!0;if(-1==r[s].indexOf("--\x3e")){if(g.id=r[s],/^NOTE($|[ \t])/.test(g.id)){for(s++;""!=r[s]&&void 0!=r[s];)-1!=r[s].indexOf("--\x3e")&&u("Cannot have timestamp in a comment."),s++;continue}if(""==r[++s]||void 0==r[s]){u("Cue identifier cannot be standalone.");continue}-1==r[s].indexOf("--\x3e")&&(h=!1,u("Cue identifier needs to be followed by timestamp."))}o=!1;var x=new i(r[s],u),b=0;if(l.length>0&&(b=l[l.length-1].startTime),!h||x.parse(g,b)){for(s++;""!=r[s]&&void 0!=r[s];){if(-1!=r[s].indexOf("--\x3e")){u("Blank line missing before cue."),o=!0;break}""!=g.text&&(g.text+="\n"),g.text+=r[s],s++}var T=new a(g.text,u,t);g.tree=T.parse(g.startTime,g.endTime),l.push(g)}else for(g=null,s++;""!=r[s]&&void 0!=r[s];){if(-1!=r[s].indexOf("--\x3e")){o=!0;break}s++}}return l.sort((function(e,t){return e.startTime<t.startTime?-1:e.startTime>t.startTime?1:e.endTime>t.endTime?-1:e.endTime<t.endTime?1:0})),{cues:l,errors:f,time:Date.now()-n}}}}}]);
//# sourceMappingURL=webvtt.eaee702f.chunk.js.map