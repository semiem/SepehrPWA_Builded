{"version":3,"sources":["E:/xampp/7.4.16/htdocs/SepehrApi-Webapp-ReactJS/node_modules/global/window.js","E:/xampp/7.4.16/htdocs/SepehrApi-Webapp-ReactJS/node_modules/videojs-vtt.js/lib/vtt.js","E:/xampp/7.4.16/htdocs/SepehrApi-Webapp-ReactJS/node_modules/global/document.js","E:/xampp/7.4.16/htdocs/SepehrApi-Webapp-ReactJS/node_modules/videojs-vtt.js/lib/vttcue.js","E:/xampp/7.4.16/htdocs/SepehrApi-Webapp-ReactJS/node_modules/videojs-vtt.js/lib/vttregion.js","E:/xampp/7.4.16/htdocs/SepehrApi-Webapp-ReactJS/node_modules/videojs-vtt.js/lib/browser-index.js"],"names":["win","window","global","self","module","exports","document","require","_objCreate","Object","create","F","o","arguments","length","Error","prototype","ParsingError","errorData","message","this","name","code","parseTimeStamp","input","computeSeconds","h","m","s","f","match","replace","Settings","values","parseOptions","callback","keyValueDelim","groupDelim","groups","split","i","kv","parseCue","cue","regionList","oInput","consumeTimeStamp","ts","Errors","BadTimeStamp","skipWhitespace","startTime","substr","endTime","settings","k","v","id","set","region","alt","vals","vals0","integer","percent","get","vertical","line","e","lineAlign","snapToLines","size","align","position","start","left","center","middle","end","right","positionAlign","consumeCueSettings","constructor","BadSignature","dflt","defaultKey","has","a","n","test","parseInt","parseFloat","TEXTAREA_ELEMENT","createElement","TAG_NAME","c","b","u","ruby","rt","lang","DEFAULT_COLOR_CLASS","white","lime","cyan","red","yellow","magenta","blue","black","TAG_ANNOTATION","NEEDS_PARENT","parseContent","nextToken","result","shouldAdd","current","element","localName","type","annotation","tagName","trim","t","rootDiv","tagStack","appendChild","createTextNode","innerHTML","textContent","pop","parentNode","node","createProcessingInstruction","classes","forEach","cl","bgColor","colorName","slice","hasOwnProperty","propName","propValue","style","className","join","push","strongRTLRanges","isStrongRTLChar","charCode","currentRange","determineBidi","cueDiv","nodeStack","text","childNodes","pushNodes","nextTextNode","innerText","charCodeAt","StyleBox","CueStyleBox","styleOptions","call","styles","color","backgroundColor","top","bottom","display","writingMode","unicodeBidi","applyStyles","div","direction","textAlign","font","whiteSpace","textPos","formatStyle","width","height","move","box","BoxPosition","obj","lh","offsetHeight","offsetWidth","offsetTop","rects","getClientRects","getBoundingClientRect","Math","max","lineHeight","undefined","moveBoxToLinePosition","styleBox","containerBox","boxPositions","boxPosition","linePos","track","textTrackList","mediaElement","trackList","count","mode","computeLinePos","axis","step","round","maxPosition","initialAxis","abs","ceil","reverse","calculatedPercentage","bestPosition","specifiedPosition","percentage","overlapsOppositeAxis","within","overlapsAny","p","intersectPercentage","findBestPosition","toCSSCompatValues","WebVTT","prop","val","unit","toMove","overlaps","b2","boxes","container","min","reference","getSimpleBoxPosition","StringDecoder","decode","data","decodeURIComponent","encodeURIComponent","convertCueToDOMTree","cuetext","processCues","cues","overlay","firstChild","removeChild","paddedOverlay","margin","hasBeenReset","displayState","shouldCompute","fontSize","Parser","vttjs","decoder","state","buffer","TextDecoder","reportOrThrowError","onparsingerror","parse","collectNextLine","pos","parseHeader","ontimestampmap","parseTimestampMap","xy","anchor","VTTRegion","lines","regionAnchorX","regionAnchorY","viewportAnchorX","viewportAnchorY","scroll","onregion","parseRegion","stream","alreadyCollectedLine","VTTCue","indexOf","hasSubstring","oncue","flush","onflush","doccy","topLevel","minDoc","directionSetting","alignSetting","findAlignSetting","value","toLowerCase","_id","_pauseOnExit","_startTime","_endTime","_text","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","defineProperties","enumerable","TypeError","setting","findDirectionSetting","SyntaxError","console","warn","getCueAsHTML","scrollSetting","isValidPercentValue","_width","_lines","_regionAnchorX","_regionAnchorY","_viewportAnchorX","_viewportAnchorY","_scroll","findScrollSetting","cueShim","regionShim","nativeVTTCue","nativeVTTRegion","shim","restore"],"mappings":"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","file":"static/js/7.cf601e78.chunk.js","sourcesContent":["var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\nvar document = require('global/document');\n\nvar _objCreate = Object.create || (function() {\n  function F() {}\n  return function(o) {\n    if (arguments.length !== 1) {\n      throw new Error('Object.create shim only accepts one parameter.');\n    }\n    F.prototype = o;\n    return new F();\n  };\n})();\n\n// Creates a new ParserError object from an errorData object. The errorData\n// object should have default code and message properties. The default message\n// property can be overriden by passing in a message parameter.\n// See ParsingError.Errors below for acceptable errors.\nfunction ParsingError(errorData, message) {\n  this.name = \"ParsingError\";\n  this.code = errorData.code;\n  this.message = message || errorData.message;\n}\nParsingError.prototype = _objCreate(Error.prototype);\nParsingError.prototype.constructor = ParsingError;\n\n// ParsingError metadata for acceptable ParsingErrors.\nParsingError.Errors = {\n  BadSignature: {\n    code: 0,\n    message: \"Malformed WebVTT signature.\"\n  },\n  BadTimeStamp: {\n    code: 1,\n    message: \"Malformed time stamp.\"\n  }\n};\n\n// Try to parse input as a time stamp.\nfunction parseTimeStamp(input) {\n\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  var m = input.match(/^(\\d+):(\\d{1,2})(:\\d{1,2})?\\.(\\d{3})/);\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0,  m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n}\n\n// A settings object holds key/value pairs and will ignore anything but the first\n// assignment to a specific key.\nfunction Settings() {\n  this.values = _objCreate(null);\n}\n\nSettings.prototype = {\n  // Only accept the first assignment to any key.\n  set: function(k, v) {\n    if (!this.get(k) && v !== \"\") {\n      this.values[k] = v;\n    }\n  },\n  // Return the value for a key, or a default value.\n  // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n  // a number of possible default values as properties where 'defaultKey' is\n  // the key of the property that will be chosen; otherwise it's assumed to be\n  // a single value.\n  get: function(k, dflt, defaultKey) {\n    if (defaultKey) {\n      return this.has(k) ? this.values[k] : dflt[defaultKey];\n    }\n    return this.has(k) ? this.values[k] : dflt;\n  },\n  // Check whether we have a value for a key.\n  has: function(k) {\n    return k in this.values;\n  },\n  // Accept a setting if its one of the given alternatives.\n  alt: function(k, v, a) {\n    for (var n = 0; n < a.length; ++n) {\n      if (v === a[n]) {\n        this.set(k, v);\n        break;\n      }\n    }\n  },\n  // Accept a setting if its a valid (signed) integer.\n  integer: function(k, v) {\n    if (/^-?\\d+$/.test(v)) { // integer\n      this.set(k, parseInt(v, 10));\n    }\n  },\n  // Accept a setting if its a valid percentage.\n  percent: function(k, v) {\n    var m;\n    if ((m = v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/))) {\n      v = parseFloat(v);\n      if (v >= 0 && v <= 100) {\n        this.set(k, v);\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\n// Helper function to parse input into groups separated by 'groupDelim', and\n// interprete each group as a key/value pair separated by 'keyValueDelim'.\nfunction parseOptions(input, callback, keyValueDelim, groupDelim) {\n  var groups = groupDelim ? input.split(groupDelim) : [input];\n  for (var i in groups) {\n    if (typeof groups[i] !== \"string\") {\n      continue;\n    }\n    var kv = groups[i].split(keyValueDelim);\n    if (kv.length !== 2) {\n      continue;\n    }\n    var k = kv[0];\n    var v = kv[1];\n    callback(k, v);\n  }\n}\n\nfunction parseCue(input, cue, regionList) {\n  // Remember the original input if we need to throw an error.\n  var oInput = input;\n  // 4.1 WebVTT timestamp\n  function consumeTimeStamp() {\n    var ts = parseTimeStamp(input);\n    if (ts === null) {\n      throw new ParsingError(ParsingError.Errors.BadTimeStamp,\n                            \"Malformed timestamp: \" + oInput);\n    }\n    // Remove time stamp from input.\n    input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n    return ts;\n  }\n\n  // 4.4.2 WebVTT cue settings\n  function consumeCueSettings(input, cue) {\n    var settings = new Settings();\n\n    parseOptions(input, function (k, v) {\n      switch (k) {\n      case \"region\":\n        // Find the last region we parsed with the same region id.\n        for (var i = regionList.length - 1; i >= 0; i--) {\n          if (regionList[i].id === v) {\n            settings.set(k, regionList[i].region);\n            break;\n          }\n        }\n        break;\n      case \"vertical\":\n        settings.alt(k, v, [\"rl\", \"lr\"]);\n        break;\n      case \"line\":\n        var vals = v.split(\",\"),\n            vals0 = vals[0];\n        settings.integer(k, vals0);\n        settings.percent(k, vals0) ? settings.set(\"snapToLines\", false) : null;\n        settings.alt(k, vals0, [\"auto\"]);\n        if (vals.length === 2) {\n          settings.alt(\"lineAlign\", vals[1], [\"start\", \"center\", \"end\"]);\n        }\n        break;\n      case \"position\":\n        vals = v.split(\",\");\n        settings.percent(k, vals[0]);\n        if (vals.length === 2) {\n          settings.alt(\"positionAlign\", vals[1], [\"start\", \"center\", \"end\"]);\n        }\n        break;\n      case \"size\":\n        settings.percent(k, v);\n        break;\n      case \"align\":\n        settings.alt(k, v, [\"start\", \"center\", \"end\", \"left\", \"right\"]);\n        break;\n      }\n    }, /:/, /\\s/);\n\n    // Apply default values for any missing fields.\n    cue.region = settings.get(\"region\", null);\n    cue.vertical = settings.get(\"vertical\", \"\");\n    try {\n      cue.line = settings.get(\"line\", \"auto\");\n    } catch (e) {}\n    cue.lineAlign = settings.get(\"lineAlign\", \"start\");\n    cue.snapToLines = settings.get(\"snapToLines\", true);\n    cue.size = settings.get(\"size\", 100);\n    // Safari still uses the old middle value and won't accept center\n    try {\n      cue.align = settings.get(\"align\", \"center\");\n    } catch (e) {\n      cue.align = settings.get(\"align\", \"middle\");\n    }\n    try {\n      cue.position = settings.get(\"position\", \"auto\");\n    } catch (e) {\n      cue.position = settings.get(\"position\", {\n        start: 0,\n        left: 0,\n        center: 50,\n        middle: 50,\n        end: 100,\n        right: 100\n      }, cue.align);\n    }\n\n\n    cue.positionAlign = settings.get(\"positionAlign\", {\n      start: \"start\",\n      left: \"start\",\n      center: \"center\",\n      middle: \"center\",\n      end: \"end\",\n      right: \"end\"\n    }, cue.align);\n  }\n\n  function skipWhitespace() {\n    input = input.replace(/^\\s+/, \"\");\n  }\n\n  // 4.1 WebVTT cue timings.\n  skipWhitespace();\n  cue.startTime = consumeTimeStamp();   // (1) collect cue start time\n  skipWhitespace();\n  if (input.substr(0, 3) !== \"-->\") {     // (3) next characters must match \"-->\"\n    throw new ParsingError(ParsingError.Errors.BadTimeStamp,\n                           \"Malformed time stamp (time stamps must be separated by '-->'): \" +\n                           oInput);\n  }\n  input = input.substr(3);\n  skipWhitespace();\n  cue.endTime = consumeTimeStamp();     // (5) collect cue end time\n\n  // 4.1 WebVTT cue settings list.\n  skipWhitespace();\n  consumeCueSettings(input, cue);\n}\n\n// When evaluating this file as part of a Webpack bundle for server\n// side rendering, `document` is an empty object.\nvar TEXTAREA_ELEMENT = document.createElement && document.createElement(\"textarea\");\n\nvar TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n};\n\n// 5.1 default text color\n// 5.2 default text background color is equivalent to text color with bg_ prefix\nvar DEFAULT_COLOR_CLASS = {\n  white: 'rgba(255,255,255,1)',\n  lime: 'rgba(0,255,0,1)',\n  cyan: 'rgba(0,255,255,1)',\n  red: 'rgba(255,0,0,1)',\n  yellow: 'rgba(255,255,0,1)',\n  magenta: 'rgba(255,0,255,1)',\n  blue: 'rgba(0,0,255,1)',\n  black: 'rgba(0,0,0,1)'\n};\n\nvar TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\n\nvar NEEDS_PARENT = {\n  rt: \"ruby\"\n};\n\n// Parse content into a document fragment.\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    }\n\n    // Consume 'n' characters from the input.\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    var m = input.match(/^([^<]*)(<[^>]*>?)?/);\n    // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  function unescape(s) {\n    TEXTAREA_ELEMENT.innerHTML = s;\n    s = TEXTAREA_ELEMENT.textContent;\n    TEXTAREA_ELEMENT.textContent = \"\";\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] ||\n           NEEDS_PARENT[element.localName] === current.localName;\n  }\n\n  // Create an element for this tag.\n  function createElement(type, annotation) {\n    var tagName = TAG_NAME[type];\n    if (!tagName) {\n      return null;\n    }\n    var element = window.document.createElement(tagName);\n    var name = TAG_ANNOTATION[type];\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n    return element;\n  }\n\n  var rootDiv = window.document.createElement(\"div\"),\n      current = rootDiv,\n      t,\n      tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length &&\n            tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        }\n        // Otherwise just ignore the end tag.\n        continue;\n      }\n      var ts = parseTimeStamp(t.substr(1, t.length - 2));\n      var node;\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n      var m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n      // If we can't parse the tag, skip to the next tag.\n      if (!m) {\n        continue;\n      }\n      // Try to construct an element, and ignore the tag if we couldn't.\n      node = createElement(m[1], m[3]);\n      if (!node) {\n        continue;\n      }\n      // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n      if (!shouldAdd(current, node)) {\n        continue;\n      }\n      // Set the class list (as a list of classes, separated by space).\n      if (m[2]) {\n        var classes = m[2].split('.');\n\n        classes.forEach(function(cl) {\n          var bgColor = /^bg_/.test(cl);\n          // slice out `bg_` if it's a background color\n          var colorName = bgColor ? cl.slice(3) : cl;\n\n          if (DEFAULT_COLOR_CLASS.hasOwnProperty(colorName)) {\n            var propName = bgColor ? 'background-color' : 'color';\n            var propValue = DEFAULT_COLOR_CLASS[colorName];\n\n            node.style[propName] = propValue;\n          }\n        });\n\n        node.className = classes.join(' ');\n      }\n      // Append the node to the current node, and enter the scope of the new\n      // node.\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    }\n\n    // Text nodes are leaf nodes.\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n}\n\n// This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\nvar strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6],\n [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d],\n [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6],\n [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5],\n [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815],\n [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858],\n [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f],\n [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c],\n [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1],\n [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc],\n [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808],\n [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855],\n [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f],\n [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13],\n [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58],\n [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72],\n [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f],\n [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32],\n [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42],\n [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f],\n [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59],\n [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62],\n [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77],\n [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b],\n [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (var i = 0; i < strongRTLRanges.length; i++) {\n    var currentRange = strongRTLRanges[i];\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  var nodeStack = [],\n      text = \"\",\n      charCode;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    var node = nodeStack.pop(),\n        text = node.textContent || node.innerText;\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      var m = text.match(/^.*(\\n|\\r)/);\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n      return text;\n    }\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n  while ((text = nextTextNode(nodeStack))) {\n    for (var i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" &&\n      (cue.snapToLines || (cue.line >= 0 && cue.line <= 100))) {\n    return cue.line;\n  }\n  if (!cue.track || !cue.track.textTrackList ||\n      !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n  var track = cue.track,\n      trackList = track.textTrackList,\n      count = 0;\n  for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n  return ++count * -1;\n}\n\nfunction StyleBox() {\n}\n\n// Apply styles to a div. If there is no div passed then it defaults to the\n// div on 'this'.\nStyleBox.prototype.applyStyles = function(styles, div) {\n  div = div || this.div;\n  for (var prop in styles) {\n    if (styles.hasOwnProperty(prop)) {\n      div.style[prop] = styles[prop];\n    }\n  }\n};\n\nStyleBox.prototype.formatStyle = function(val, unit) {\n  return val === 0 ? 0 : val + unit;\n};\n\n// Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\nfunction CueStyleBox(window, cue, styleOptions) {\n  StyleBox.call(this);\n  this.cue = cue;\n\n  // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n  // have inline positioning and will function as the cue background box.\n  this.cueDiv = parseContent(window, cue.text);\n  var styles = {\n    color: \"rgba(255, 255, 255, 1)\",\n    backgroundColor:  \"rgba(0, 0, 0, 0.8)\",\n    position: \"relative\",\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    display: \"inline\",\n    writingMode: cue.vertical === \"\" ? \"horizontal-tb\"\n                                     : cue.vertical === \"lr\" ? \"vertical-lr\"\n                                                             : \"vertical-rl\",\n    unicodeBidi: \"plaintext\"\n  };\n\n  this.applyStyles(styles, this.cueDiv);\n\n  // Create an absolutely positioned div that will be used to position the cue\n  // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n  // mirrors of them except middle instead of center on Safari.\n  this.div = window.document.createElement(\"div\");\n  styles = {\n    direction: determineBidi(this.cueDiv),\n    writingMode: cue.vertical === \"\" ? \"horizontal-tb\"\n                                     : cue.vertical === \"lr\" ? \"vertical-lr\"\n                                                             : \"vertical-rl\",\n    unicodeBidi: \"plaintext\",\n    textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n    font: styleOptions.font,\n    whiteSpace: \"pre-line\",\n    position: \"absolute\"\n  };\n\n  this.applyStyles(styles);\n  this.div.appendChild(this.cueDiv);\n\n  // Calculate the distance from the reference edge of the viewport to the text\n  // position of the cue box. The reference edge will be resolved later when\n  // the box orientation styles are applied.\n  var textPos = 0;\n  switch (cue.positionAlign) {\n  case \"start\":\n    textPos = cue.position;\n    break;\n  case \"center\":\n    textPos = cue.position - (cue.size / 2);\n    break;\n  case \"end\":\n    textPos = cue.position - cue.size;\n    break;\n  }\n\n  // Horizontal box orientation; textPos is the distance from the left edge of the\n  // area to the left edge of the box and cue.size is the distance extending to\n  // the right from there.\n  if (cue.vertical === \"\") {\n    this.applyStyles({\n      left:  this.formatStyle(textPos, \"%\"),\n      width: this.formatStyle(cue.size, \"%\")\n    });\n  // Vertical box orientation; textPos is the distance from the top edge of the\n  // area to the top edge of the box and cue.size is the height extending\n  // downwards from there.\n  } else {\n    this.applyStyles({\n      top: this.formatStyle(textPos, \"%\"),\n      height: this.formatStyle(cue.size, \"%\")\n    });\n  }\n\n  this.move = function(box) {\n    this.applyStyles({\n      top: this.formatStyle(box.top, \"px\"),\n      bottom: this.formatStyle(box.bottom, \"px\"),\n      left: this.formatStyle(box.left, \"px\"),\n      right: this.formatStyle(box.right, \"px\"),\n      height: this.formatStyle(box.height, \"px\"),\n      width: this.formatStyle(box.width, \"px\")\n    });\n  };\n}\nCueStyleBox.prototype = _objCreate(StyleBox.prototype);\nCueStyleBox.prototype.constructor = CueStyleBox;\n\n// Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\nfunction BoxPosition(obj) {\n  // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n  // was passed in and we need to copy the results of 'getBoundingClientRect'\n  // as the object returned is readonly. All co-ordinate values are in reference\n  // to the viewport origin (top left).\n  var lh, height, width, top;\n  if (obj.div) {\n    height = obj.div.offsetHeight;\n    width = obj.div.offsetWidth;\n    top = obj.div.offsetTop;\n\n    var rects = (rects = obj.div.childNodes) && (rects = rects[0]) &&\n                rects.getClientRects && rects.getClientRects();\n    obj = obj.div.getBoundingClientRect();\n    // In certain cases the outter div will be slightly larger then the sum of\n    // the inner div's lines. This could be due to bold text, etc, on some platforms.\n    // In this case we should get the average line height and use that. This will\n    // result in the desired behaviour.\n    lh = rects ? Math.max((rects[0] && rects[0].height) || 0, obj.height / rects.length)\n               : 0;\n\n  }\n  this.left = obj.left;\n  this.right = obj.right;\n  this.top = obj.top || top;\n  this.height = obj.height || height;\n  this.bottom = obj.bottom || (top + (obj.height || height));\n  this.width = obj.width || width;\n  this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n}\n\n// Move the box along a particular axis. Optionally pass in an amount to move\n// the box. If no amount is passed then the default is the line height of the\n// box.\nBoxPosition.prototype.move = function(axis, toMove) {\n  toMove = toMove !== undefined ? toMove : this.lineHeight;\n  switch (axis) {\n  case \"+x\":\n    this.left += toMove;\n    this.right += toMove;\n    break;\n  case \"-x\":\n    this.left -= toMove;\n    this.right -= toMove;\n    break;\n  case \"+y\":\n    this.top += toMove;\n    this.bottom += toMove;\n    break;\n  case \"-y\":\n    this.top -= toMove;\n    this.bottom -= toMove;\n    break;\n  }\n};\n\n// Check if this box overlaps another box, b2.\nBoxPosition.prototype.overlaps = function(b2) {\n  return this.left < b2.right &&\n         this.right > b2.left &&\n         this.top < b2.bottom &&\n         this.bottom > b2.top;\n};\n\n// Check if this box overlaps any other boxes in boxes.\nBoxPosition.prototype.overlapsAny = function(boxes) {\n  for (var i = 0; i < boxes.length; i++) {\n    if (this.overlaps(boxes[i])) {\n      return true;\n    }\n  }\n  return false;\n};\n\n// Check if this box is within another box.\nBoxPosition.prototype.within = function(container) {\n  return this.top >= container.top &&\n         this.bottom <= container.bottom &&\n         this.left >= container.left &&\n         this.right <= container.right;\n};\n\n// Check if this box is entirely within the container or it is overlapping\n// on the edge opposite of the axis direction passed. For example, if \"+x\" is\n// passed and the box is overlapping on the left edge of the container, then\n// return true.\nBoxPosition.prototype.overlapsOppositeAxis = function(container, axis) {\n  switch (axis) {\n  case \"+x\":\n    return this.left < container.left;\n  case \"-x\":\n    return this.right > container.right;\n  case \"+y\":\n    return this.top < container.top;\n  case \"-y\":\n    return this.bottom > container.bottom;\n  }\n};\n\n// Find the percentage of the area that this box is overlapping with another\n// box.\nBoxPosition.prototype.intersectPercentage = function(b2) {\n  var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n      y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n      intersectArea = x * y;\n  return intersectArea / (this.height * this.width);\n};\n\n// Convert the positions from this box to CSS compatible positions using\n// the reference container's positions. This has to be done because this\n// box's positions are in reference to the viewport origin, whereas, CSS\n// values are in referecne to their respective edges.\nBoxPosition.prototype.toCSSCompatValues = function(reference) {\n  return {\n    top: this.top - reference.top,\n    bottom: reference.bottom - this.bottom,\n    left: this.left - reference.left,\n    right: reference.right - this.right,\n    height: this.height,\n    width: this.width\n  };\n};\n\n// Get an object that represents the box's position without anything extra.\n// Can pass a StyleBox, HTMLElement, or another BoxPositon.\nBoxPosition.getSimpleBoxPosition = function(obj) {\n  var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n  var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n  var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n  obj = obj.div ? obj.div.getBoundingClientRect() :\n                obj.tagName ? obj.getBoundingClientRect() : obj;\n  var ret = {\n    left: obj.left,\n    right: obj.right,\n    top: obj.top || top,\n    height: obj.height || height,\n    bottom: obj.bottom || (top + (obj.height || height)),\n    width: obj.width || width\n  };\n  return ret;\n};\n\n// Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\nfunction moveBoxToLinePosition(window, styleBox, containerBox, boxPositions) {\n\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    var bestPosition,\n        specifiedPosition = new BoxPosition(b),\n        percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (var i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) ||\n             (b.within(containerBox) && b.overlapsAny(boxPositions))) {\n        b.move(axis[i]);\n      }\n      // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n      if (b.within(containerBox)) {\n        return b;\n      }\n      var p = b.intersectPercentage(containerBox);\n      // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      }\n      // Reset the box position to the specified position.\n      b = new BoxPosition(specifiedPosition);\n    }\n    return bestPosition || specifiedPosition;\n  }\n\n  var boxPosition = new BoxPosition(styleBox),\n      cue = styleBox.cue,\n      linePos = computeLinePos(cue),\n      axis = [];\n\n  // If we have a line number to align the cue to.\n  if (cue.snapToLines) {\n    var size;\n    switch (cue.vertical) {\n    case \"\":\n      axis = [ \"+y\", \"-y\" ];\n      size = \"height\";\n      break;\n    case \"rl\":\n      axis = [ \"+x\", \"-x\" ];\n      size = \"width\";\n      break;\n    case \"lr\":\n      axis = [ \"-x\", \"+x\" ];\n      size = \"width\";\n      break;\n    }\n\n    var step = boxPosition.lineHeight,\n        position = step * Math.round(linePos),\n        maxPosition = containerBox[size] + step,\n        initialAxis = axis[0];\n\n    // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n\n    // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    }\n\n    // Move the box to the specified position. This may not be its best\n    // position.\n    boxPosition.move(initialAxis, position);\n\n  } else {\n    // If we have a percentage line value for the cue.\n    var calculatedPercentage = (boxPosition.lineHeight / containerBox.height) * 100;\n\n    switch (cue.lineAlign) {\n    case \"center\":\n      linePos -= (calculatedPercentage / 2);\n      break;\n    case \"end\":\n      linePos -= calculatedPercentage;\n      break;\n    }\n\n    // Apply initial line position to the cue box.\n    switch (cue.vertical) {\n    case \"\":\n      styleBox.applyStyles({\n        top: styleBox.formatStyle(linePos, \"%\")\n      });\n      break;\n    case \"rl\":\n      styleBox.applyStyles({\n        left: styleBox.formatStyle(linePos, \"%\")\n      });\n      break;\n    case \"lr\":\n      styleBox.applyStyles({\n        right: styleBox.formatStyle(linePos, \"%\")\n      });\n      break;\n    }\n\n    axis = [ \"+y\", \"-x\", \"+x\", \"-y\" ];\n\n    // Get the box position again after we've applied the specified positioning\n    // to it.\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  var bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction WebVTT() {\n  // Nothing\n}\n\n// Helper to allow strings to be decoded instead of the default binary utf8 data.\nWebVTT.StringDecoder = function() {\n  return {\n    decode: function(data) {\n      if (!data) {\n        return \"\";\n      }\n      if (typeof data !== \"string\") {\n        throw new Error(\"Error - expected string data.\");\n      }\n      return decodeURIComponent(encodeURIComponent(data));\n    }\n  };\n};\n\nWebVTT.convertCueToDOMTree = function(window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n  return parseContent(window, cuetext);\n};\n\nvar FONT_SIZE_PERCENT = 0.05;\nvar FONT_STYLE = \"sans-serif\";\nvar CUE_BACKGROUND_PADDING = \"1.5%\";\n\n// Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\nWebVTT.processCues = function(window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  }\n\n  // Remove all previous children.\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  var paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay);\n\n  // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n  function shouldCompute(cues) {\n    for (var i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // We don't need to recompute the cues' display states. Just reuse them.\n  if (!shouldCompute(cues)) {\n    for (var i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n    return;\n  }\n\n  var boxPositions = [],\n      containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n      fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  var styleOptions = {\n    font: fontSize + \"px \" + FONT_STYLE\n  };\n\n  (function() {\n    var styleBox, cue;\n\n    for (var i = 0; i < cues.length; i++) {\n      cue = cues[i];\n\n      // Compute the intial position and styles of the cue div.\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div);\n\n      // Move the cue div to it's correct line position.\n      moveBoxToLinePosition(window, styleBox, containerBox, boxPositions);\n\n      // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n      cue.displayState = styleBox.div;\n\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\nWebVTT.Parser = function(window, vttjs, decoder) {\n  if (!decoder) {\n    decoder = vttjs;\n    vttjs = {};\n  }\n  if (!vttjs) {\n    vttjs = {};\n  }\n\n  this.window = window;\n  this.vttjs = vttjs;\n  this.state = \"INITIAL\";\n  this.buffer = \"\";\n  this.decoder = decoder || new TextDecoder(\"utf8\");\n  this.regionList = [];\n};\n\nWebVTT.Parser.prototype = {\n  // If the error is a ParsingError then report it to the consumer if\n  // possible. If it's not a ParsingError then throw it like normal.\n  reportOrThrowError: function(e) {\n    if (e instanceof ParsingError) {\n      this.onparsingerror && this.onparsingerror(e);\n    } else {\n      throw e;\n    }\n  },\n  parse: function (data) {\n    var self = this;\n\n    // If there is no data then we won't decode it, but will just try to parse\n    // whatever is in buffer already. This may occur in circumstances, for\n    // example when flush() is called.\n    if (data) {\n      // Try to decode the data that we received.\n      self.buffer += self.decoder.decode(data, {stream: true});\n    }\n\n    function collectNextLine() {\n      var buffer = self.buffer;\n      var pos = 0;\n      while (pos < buffer.length && buffer[pos] !== '\\r' && buffer[pos] !== '\\n') {\n        ++pos;\n      }\n      var line = buffer.substr(0, pos);\n      // Advance the buffer early in case we fail below.\n      if (buffer[pos] === '\\r') {\n        ++pos;\n      }\n      if (buffer[pos] === '\\n') {\n        ++pos;\n      }\n      self.buffer = buffer.substr(pos);\n      return line;\n    }\n\n    // 3.4 WebVTT region and WebVTT region settings syntax\n    function parseRegion(input) {\n      var settings = new Settings();\n\n      parseOptions(input, function (k, v) {\n        switch (k) {\n        case \"id\":\n          settings.set(k, v);\n          break;\n        case \"width\":\n          settings.percent(k, v);\n          break;\n        case \"lines\":\n          settings.integer(k, v);\n          break;\n        case \"regionanchor\":\n        case \"viewportanchor\":\n          var xy = v.split(',');\n          if (xy.length !== 2) {\n            break;\n          }\n          // We have to make sure both x and y parse, so use a temporary\n          // settings object here.\n          var anchor = new Settings();\n          anchor.percent(\"x\", xy[0]);\n          anchor.percent(\"y\", xy[1]);\n          if (!anchor.has(\"x\") || !anchor.has(\"y\")) {\n            break;\n          }\n          settings.set(k + \"X\", anchor.get(\"x\"));\n          settings.set(k + \"Y\", anchor.get(\"y\"));\n          break;\n        case \"scroll\":\n          settings.alt(k, v, [\"up\"]);\n          break;\n        }\n      }, /=/, /\\s/);\n\n      // Create the region, using default values for any values that were not\n      // specified.\n      if (settings.has(\"id\")) {\n        var region = new (self.vttjs.VTTRegion || self.window.VTTRegion)();\n        region.width = settings.get(\"width\", 100);\n        region.lines = settings.get(\"lines\", 3);\n        region.regionAnchorX = settings.get(\"regionanchorX\", 0);\n        region.regionAnchorY = settings.get(\"regionanchorY\", 100);\n        region.viewportAnchorX = settings.get(\"viewportanchorX\", 0);\n        region.viewportAnchorY = settings.get(\"viewportanchorY\", 100);\n        region.scroll = settings.get(\"scroll\", \"\");\n        // Register the region.\n        self.onregion && self.onregion(region);\n        // Remember the VTTRegion for later in case we parse any VTTCues that\n        // reference it.\n        self.regionList.push({\n          id: settings.get(\"id\"),\n          region: region\n        });\n      }\n    }\n\n    // draft-pantos-http-live-streaming-20\n    // https://tools.ietf.org/html/draft-pantos-http-live-streaming-20#section-3.5\n    // 3.5 WebVTT\n    function parseTimestampMap(input) {\n      var settings = new Settings();\n\n      parseOptions(input, function(k, v) {\n        switch(k) {\n        case \"MPEGT\":\n          settings.integer(k + 'S', v);\n          break;\n        case \"LOCA\":\n          settings.set(k + 'L', parseTimeStamp(v));\n          break;\n        }\n      }, /[^\\d]:/, /,/);\n\n      self.ontimestampmap && self.ontimestampmap({\n        \"MPEGTS\": settings.get(\"MPEGTS\"),\n        \"LOCAL\": settings.get(\"LOCAL\")\n      });\n    }\n\n    // 3.2 WebVTT metadata header syntax\n    function parseHeader(input) {\n      if (input.match(/X-TIMESTAMP-MAP/)) {\n        // This line contains HLS X-TIMESTAMP-MAP metadata\n        parseOptions(input, function(k, v) {\n          switch(k) {\n          case \"X-TIMESTAMP-MAP\":\n            parseTimestampMap(v);\n            break;\n          }\n        }, /=/);\n      } else {\n        parseOptions(input, function (k, v) {\n          switch (k) {\n          case \"Region\":\n            // 3.3 WebVTT region metadata header syntax\n            parseRegion(v);\n            break;\n          }\n        }, /:/);\n      }\n\n    }\n\n    // 5.1 WebVTT file parsing.\n    try {\n      var line;\n      if (self.state === \"INITIAL\") {\n        // We can't start parsing until we have the first line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        line = collectNextLine();\n\n        var m = line.match(/^WEBVTT([ \\t].*)?$/);\n        if (!m || !m[0]) {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n\n        self.state = \"HEADER\";\n      }\n\n      var alreadyCollectedLine = false;\n      while (self.buffer) {\n        // We can't parse a line until we have the full line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        if (!alreadyCollectedLine) {\n          line = collectNextLine();\n        } else {\n          alreadyCollectedLine = false;\n        }\n\n        switch (self.state) {\n        case \"HEADER\":\n          // 13-18 - Allow a header (metadata) under the WEBVTT line.\n          if (/:/.test(line)) {\n            parseHeader(line);\n          } else if (!line) {\n            // An empty line terminates the header and starts the body (cues).\n            self.state = \"ID\";\n          }\n          continue;\n        case \"NOTE\":\n          // Ignore NOTE blocks.\n          if (!line) {\n            self.state = \"ID\";\n          }\n          continue;\n        case \"ID\":\n          // Check for the start of NOTE blocks.\n          if (/^NOTE($|[ \\t])/.test(line)) {\n            self.state = \"NOTE\";\n            break;\n          }\n          // 19-29 - Allow any number of line terminators, then initialize new cue values.\n          if (!line) {\n            continue;\n          }\n          self.cue = new (self.vttjs.VTTCue || self.window.VTTCue)(0, 0, \"\");\n          // Safari still uses the old middle value and won't accept center\n          try {\n            self.cue.align = \"center\";\n          } catch (e) {\n            self.cue.align = \"middle\";\n          }\n          self.state = \"CUE\";\n          // 30-39 - Check if self line contains an optional identifier or timing data.\n          if (line.indexOf(\"-->\") === -1) {\n            self.cue.id = line;\n            continue;\n          }\n          // Process line as start of a cue.\n          /*falls through*/\n        case \"CUE\":\n          // 40 - Collect cue timings and settings.\n          try {\n            parseCue(line, self.cue, self.regionList);\n          } catch (e) {\n            self.reportOrThrowError(e);\n            // In case of an error ignore rest of the cue.\n            self.cue = null;\n            self.state = \"BADCUE\";\n            continue;\n          }\n          self.state = \"CUETEXT\";\n          continue;\n        case \"CUETEXT\":\n          var hasSubstring = line.indexOf(\"-->\") !== -1;\n          // 34 - If we have an empty line then report the cue.\n          // 35 - If we have the special substring '-->' then report the cue,\n          // but do not collect the line as we need to process the current\n          // one as a new cue.\n          if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n            // We are done parsing self cue.\n            self.oncue && self.oncue(self.cue);\n            self.cue = null;\n            self.state = \"ID\";\n            continue;\n          }\n          if (self.cue.text) {\n            self.cue.text += \"\\n\";\n          }\n          self.cue.text += line.replace(/\\u2028/g, '\\n').replace(/u2029/g, '\\n');\n          continue;\n        case \"BADCUE\": // BADCUE\n          // 54-62 - Collect and discard the remaining cue.\n          if (!line) {\n            self.state = \"ID\";\n          }\n          continue;\n        }\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n\n      // If we are currently parsing a cue, report what we have.\n      if (self.state === \"CUETEXT\" && self.cue && self.oncue) {\n        self.oncue(self.cue);\n      }\n      self.cue = null;\n      // Enter BADWEBVTT state if header was not parsed correctly otherwise\n      // another exception occurred so enter BADCUE state.\n      self.state = self.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n    }\n    return this;\n  },\n  flush: function () {\n    var self = this;\n    try {\n      // Finish decoding the stream.\n      self.buffer += self.decoder.decode();\n      // Synthesize the end of the current cue or region.\n      if (self.cue || self.state === \"HEADER\") {\n        self.buffer += \"\\n\\n\";\n        self.parse();\n      }\n      // If we've flushed, parsed, and we're still on the INITIAL state then\n      // that means we don't have enough of the stream to parse the first\n      // line.\n      if (self.state === \"INITIAL\") {\n        throw new ParsingError(ParsingError.Errors.BadSignature);\n      }\n    } catch(e) {\n      self.reportOrThrowError(e);\n    }\n    self.onflush && self.onflush();\n    return this;\n  }\n};\n\nmodule.exports = WebVTT;\n","var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n    doccy = document;\n} else {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n}\n\nmodule.exports = doccy;\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar autoKeyword = \"auto\";\nvar directionSetting = {\n  \"\": 1,\n  \"lr\": 1,\n  \"rl\": 1\n};\nvar alignSetting = {\n  \"start\": 1,\n  \"center\": 1,\n  \"end\": 1,\n  \"left\": 1,\n  \"right\": 1,\n  \"auto\": 1,\n  \"line-left\": 1,\n  \"line-right\": 1\n};\n\nfunction findDirectionSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  var dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\nfunction findAlignSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  var align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\nfunction VTTCue(startTime, endTime, text) {\n  /**\n   * Shim implementation specific properties. These properties are not in\n   * the spec.\n   */\n\n  // Lets us know when the VTTCue's data has changed in such a way that we need\n  // to recompute its display state. This lets us compute its display state\n  // lazily.\n  this.hasBeenReset = false;\n\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n\n  var _id = \"\";\n  var _pauseOnExit = false;\n  var _startTime = startTime;\n  var _endTime = endTime;\n  var _text = text;\n  var _region = null;\n  var _vertical = \"\";\n  var _snapToLines = true;\n  var _line = \"auto\";\n  var _lineAlign = \"start\";\n  var _position = \"auto\";\n  var _positionAlign = \"auto\";\n  var _size = 100;\n  var _align = \"center\";\n\n  Object.defineProperties(this, {\n    \"id\": {\n      enumerable: true,\n      get: function() {\n        return _id;\n      },\n      set: function(value) {\n        _id = \"\" + value;\n      }\n    },\n\n    \"pauseOnExit\": {\n      enumerable: true,\n      get: function() {\n        return _pauseOnExit;\n      },\n      set: function(value) {\n        _pauseOnExit = !!value;\n      }\n    },\n\n    \"startTime\": {\n      enumerable: true,\n      get: function() {\n        return _startTime;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Start time must be set to a number.\");\n        }\n        _startTime = value;\n        this.hasBeenReset = true;\n      }\n    },\n\n    \"endTime\": {\n      enumerable: true,\n      get: function() {\n        return _endTime;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"End time must be set to a number.\");\n        }\n        _endTime = value;\n        this.hasBeenReset = true;\n      }\n    },\n\n    \"text\": {\n      enumerable: true,\n      get: function() {\n        return _text;\n      },\n      set: function(value) {\n        _text = \"\" + value;\n        this.hasBeenReset = true;\n      }\n    },\n\n    \"region\": {\n      enumerable: true,\n      get: function() {\n        return _region;\n      },\n      set: function(value) {\n        _region = value;\n        this.hasBeenReset = true;\n      }\n    },\n\n    \"vertical\": {\n      enumerable: true,\n      get: function() {\n        return _vertical;\n      },\n      set: function(value) {\n        var setting = findDirectionSetting(value);\n        // Have to check for false because the setting an be an empty string.\n        if (setting === false) {\n          throw new SyntaxError(\"Vertical: an invalid or illegal direction string was specified.\");\n        }\n        _vertical = setting;\n        this.hasBeenReset = true;\n      }\n    },\n\n    \"snapToLines\": {\n      enumerable: true,\n      get: function() {\n        return _snapToLines;\n      },\n      set: function(value) {\n        _snapToLines = !!value;\n        this.hasBeenReset = true;\n      }\n    },\n\n    \"line\": {\n      enumerable: true,\n      get: function() {\n        return _line;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\" && value !== autoKeyword) {\n          throw new SyntaxError(\"Line: an invalid number or illegal string was specified.\");\n        }\n        _line = value;\n        this.hasBeenReset = true;\n      }\n    },\n\n    \"lineAlign\": {\n      enumerable: true,\n      get: function() {\n        return _lineAlign;\n      },\n      set: function(value) {\n        var setting = findAlignSetting(value);\n        if (!setting) {\n          console.warn(\"lineAlign: an invalid or illegal string was specified.\");\n        } else {\n          _lineAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }\n    },\n\n    \"position\": {\n      enumerable: true,\n      get: function() {\n        return _position;\n      },\n      set: function(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Position must be between 0 and 100.\");\n        }\n        _position = value;\n        this.hasBeenReset = true;\n      }\n    },\n\n    \"positionAlign\": {\n      enumerable: true,\n      get: function() {\n        return _positionAlign;\n      },\n      set: function(value) {\n        var setting = findAlignSetting(value);\n        if (!setting) {\n          console.warn(\"positionAlign: an invalid or illegal string was specified.\");\n        } else {\n          _positionAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }\n    },\n\n    \"size\": {\n      enumerable: true,\n      get: function() {\n        return _size;\n      },\n      set: function(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Size must be between 0 and 100.\");\n        }\n        _size = value;\n        this.hasBeenReset = true;\n      }\n    },\n\n    \"align\": {\n      enumerable: true,\n      get: function() {\n        return _align;\n      },\n      set: function(value) {\n        var setting = findAlignSetting(value);\n        if (!setting) {\n          throw new SyntaxError(\"align: an invalid or illegal alignment string was specified.\");\n        }\n        _align = setting;\n        this.hasBeenReset = true;\n      }\n    }\n  });\n\n  /**\n   * Other <track> spec defined properties\n   */\n\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n  this.displayState = undefined;\n}\n\n/**\n * VTTCue methods\n */\n\nVTTCue.prototype.getCueAsHTML = function() {\n  // Assume WebVTT.convertCueToDOMTree is on the global.\n  return WebVTT.convertCueToDOMTree(window, this.text);\n};\n\nmodule.exports = VTTCue;\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar scrollSetting = {\n  \"\": true,\n  \"up\": true\n};\n\nfunction findScrollSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  var scroll = scrollSetting[value.toLowerCase()];\n  return scroll ? value.toLowerCase() : false;\n}\n\nfunction isValidPercentValue(value) {\n  return typeof value === \"number\" && (value >= 0 && value <= 100);\n}\n\n// VTTRegion shim http://dev.w3.org/html5/webvtt/#vttregion-interface\nfunction VTTRegion() {\n  var _width = 100;\n  var _lines = 3;\n  var _regionAnchorX = 0;\n  var _regionAnchorY = 100;\n  var _viewportAnchorX = 0;\n  var _viewportAnchorY = 100;\n  var _scroll = \"\";\n\n  Object.defineProperties(this, {\n    \"width\": {\n      enumerable: true,\n      get: function() {\n        return _width;\n      },\n      set: function(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"Width must be between 0 and 100.\");\n        }\n        _width = value;\n      }\n    },\n    \"lines\": {\n      enumerable: true,\n      get: function() {\n        return _lines;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Lines must be set to a number.\");\n        }\n        _lines = value;\n      }\n    },\n    \"regionAnchorY\": {\n      enumerable: true,\n      get: function() {\n        return _regionAnchorY;\n      },\n      set: function(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"RegionAnchorX must be between 0 and 100.\");\n        }\n        _regionAnchorY = value;\n      }\n    },\n    \"regionAnchorX\": {\n      enumerable: true,\n      get: function() {\n        return _regionAnchorX;\n      },\n      set: function(value) {\n        if(!isValidPercentValue(value)) {\n          throw new Error(\"RegionAnchorY must be between 0 and 100.\");\n        }\n        _regionAnchorX = value;\n      }\n    },\n    \"viewportAnchorY\": {\n      enumerable: true,\n      get: function() {\n        return _viewportAnchorY;\n      },\n      set: function(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"ViewportAnchorY must be between 0 and 100.\");\n        }\n        _viewportAnchorY = value;\n      }\n    },\n    \"viewportAnchorX\": {\n      enumerable: true,\n      get: function() {\n        return _viewportAnchorX;\n      },\n      set: function(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"ViewportAnchorX must be between 0 and 100.\");\n        }\n        _viewportAnchorX = value;\n      }\n    },\n    \"scroll\": {\n      enumerable: true,\n      get: function() {\n        return _scroll;\n      },\n      set: function(value) {\n        var setting = findScrollSetting(value);\n        // Have to check for false as an empty string is a legal value.\n        if (setting === false) {\n          console.warn(\"Scroll: an invalid or illegal string was specified.\");\n        } else {\n          _scroll = setting;\n        }\n      }\n    }\n  });\n}\n\nmodule.exports = VTTRegion;\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Default exports for Node. Export the extended versions of VTTCue and\n// VTTRegion in Node since we likely want the capability to convert back and\n// forth between JSON. If we don't then it's not that big of a deal since we're\n// off browser.\n\nvar window = require('global/window');\n\nvar vttjs = module.exports = {\n  WebVTT: require(\"./vtt.js\"),\n  VTTCue: require(\"./vttcue.js\"),\n  VTTRegion: require(\"./vttregion.js\")\n};\n\nwindow.vttjs = vttjs;\nwindow.WebVTT = vttjs.WebVTT;\n\nvar cueShim = vttjs.VTTCue;\nvar regionShim = vttjs.VTTRegion;\nvar nativeVTTCue = window.VTTCue;\nvar nativeVTTRegion = window.VTTRegion;\n\nvttjs.shim = function() {\n  window.VTTCue = cueShim;\n  window.VTTRegion = regionShim;\n};\n\nvttjs.restore = function() {\n  window.VTTCue = nativeVTTCue;\n  window.VTTRegion = nativeVTTRegion;\n};\n\nif (!window.VTTCue) {\n  vttjs.shim();\n}\n"],"sourceRoot":""}